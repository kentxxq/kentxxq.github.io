<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>js on kentxxq Blog</title><link>https://kentxxq.com/tags/js/</link><description>Recent content in js on kentxxq Blog</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Wed, 29 May 2019 09:52:00 +0000</lastBuildDate><atom:link href="https://kentxxq.com/tags/js/index.xml" rel="self" type="application/rss+xml"/><item><title>使用js来帮助加解密信息</title><link>https://kentxxq.com/contents/%E4%BD%BF%E7%94%A8js%E6%9D%A5%E5%B8%AE%E5%8A%A9%E5%8A%A0%E8%A7%A3%E5%AF%86%E4%BF%A1%E6%81%AF/</link><pubDate>Wed, 29 May 2019 09:52:00 +0000</pubDate><guid>https://kentxxq.com/contents/%E4%BD%BF%E7%94%A8js%E6%9D%A5%E5%B8%AE%E5%8A%A9%E5%8A%A0%E8%A7%A3%E5%AF%86%E4%BF%A1%E6%81%AF/</guid><description>编程语言多种多样。但是常见在视野中的，就那么一些。其中js就是一个无法忽视的存在。
自从有了nodejs，前端迅速得开始了自己的工程化道理。各种框架满天飞。号称一切能用js来写的东西，都可以用js写出来。
我本人对js是无感的。论性能没有静态语言好，论快捷没有python好，论黑魔法没有ruby好。要说跨平台展示，也有很多的方案不比js差。
但是你架不住它的确是web的标准。。再怎么不搭理它，你也要懂它。
初衷 最近是一直在看flutter，同时在学着做一个app。以后要是有需要，我起码也有个东西可以展示一下。
现在的网站大多数都进行了反爬虫，反盗链等等处理。算是对自身版权的一种保护措施。无可厚非。也让你在学习的道路上接触到了更多的知识面。
出于学习的目的，我也就要迎难而上了。
html代码被js加密 分析页面 在91porn的视频播放页。
在chrome浏览器中有mp4地址，但是我在抓取完页面以后，没有找到video标签的mp4信息。
原因就在下面这一段
document.write(strencode(&amp;#34;Y31+QVcpMF49ISQcEQIVdn5TEn8xJyV6CBMJTiEHLgIYWSNwO1JWS3Q8BU88TV4sESYmFwQIOhYnFHhxIyYCRTcuflgPGAVXegUkFDkeNDQrWhJtXC8CERcaFAc8JS8vES41RQUKMwF7IDBTejdeSBgQEBM+DB4lGTIdYQBsMwsHVBtFFCUVMCtXVh19dlMc&amp;#34;,&amp;#34;35073qz4grffroXO4azOUodLDj16nSIwU3vAw8128Vn8p4gXrbwmHrwnhP5DmO71Tj/wl+Tn+Rruh/rsr6uY9kXaFORTYNCBEyc1asim+tub4c50UDIkqHGKPzOTc+f2MgA5NbCFgegj&amp;#34;,&amp;#34;Y31+QVcpMF49ISQcEQIVdn5TEn8xJyV6CBMJTiEHLgIYWSNwO1JWS3Q8BU88TV4sESYmFwQIOhYnFHhxIyYCRTcuflgPGAVXegUkFDkeNDQrWhJtXC8CERcaFAc8JS8vES41RQUKMwF7IDBTejdeSBgQEBM+DB4lGTIdYQBsMwsHVBtFFCUVMCtXVh19dlMc&amp;#34;)); 我对js的方法不是很熟，于是谷歌了一下，发现strencode是一个编码库，或者说是一个加密库。
于是我在页面请求的资源中，搜索strencode，定位到了md5.js中。
;var encode_version = &amp;#39;sojson.v5&amp;#39;, lbbpm = &amp;#39;__0x33ad7&amp;#39;, __0x33ad7=[&amp;#39;QMOTw6XDtVE=&amp;#39;,&amp;#39;w5XDgsORw5LCuQ==&amp;#39;,&amp;#39;wojDrWTChFU=&amp;#39;,&amp;#39;dkdJACw=&amp;#39;,&amp;#39;w6zDpXDDvsKVwqA=&amp;#39;,&amp;#39;ZifCsh85fsKaXsOOWg==&amp;#39;,&amp;#39;RcOvw47DghzDuA==&amp;#39;,&amp;#39;w7siYTLCnw==&amp;#39;];(function(_0x94dee0,_0x4a3b74){var _0x588ae7=function(_0x32b32e){while(--_0x32b32e){_0x94dee0[&amp;#39;push&amp;#39;](_0x94dee0[&amp;#39;shift&amp;#39;]());}};_0x588ae7(++_0x4a3b74);}(__0x33ad7,0x8f));var _0x5b60=function(_0x4d4456,_0x5a24e3){_0x4d4456=_0x4d4456-0x0;var _0xa82079=__0x33ad7[_0x4d4456];if(_0x5b60[&amp;#39;initialized&amp;#39;]===undefined){(function(){var _0xef6e0=typeof window!==&amp;#39;undefined&amp;#39;?window:typeof process===&amp;#39;object&amp;#39;&amp;amp;&amp;amp;typeof require===&amp;#39;function&amp;#39;&amp;amp;&amp;amp;typeof global===&amp;#39;object&amp;#39;?global:this;var _0x221728=&amp;#39;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=&amp;#39;;_0xef6e0[&amp;#39;atob&amp;#39;]||(_0xef6e0[&amp;#39;atob&amp;#39;]=function(_0x4bb81e){var _0x1c1b59=String(_0x4bb81e)[&amp;#39;replace&amp;#39;](/=+$/,&amp;#39;&amp;#39;);for(var _0x5e3437=0x0,_0x2da204,_0x1f23f4,_0x3f19c1=0x0,_0x3fb8a7=&amp;#39;&amp;#39;;_0x1f23f4=_0x1c1b59[&amp;#39;charAt&amp;#39;](_0x3f19c1++);~_0x1f23f4&amp;amp;&amp;amp;(_0x2da204=_0x5e3437%0x4?_0x2da204*0x40+_0x1f23f4:_0x1f23f4,_0x5e3437++%0x4)?_0x3fb8a7+=String[&amp;#39;fromCharCode&amp;#39;](0xff&amp;amp;_0x2da204&amp;gt;&amp;gt;(-0x2*_0x5e3437&amp;amp;0x6)):0x0){_0x1f23f4=_0x221728[&amp;#39;indexOf&amp;#39;](_0x1f23f4);}return _0x3fb8a7;});}());var _0x43712e=function(_0x2e9442,_0x305a3a){var _0x3702d8=[],_0x234ad1=0x0,_0xd45a92,_0x5a1bee=&amp;#39;&amp;#39;,_0x4a894e=&amp;#39;&amp;#39;;_0x2e9442=atob(_0x2e9442);for(var _0x67ab0e=0x0,_0x1753b1=_0x2e9442[&amp;#39;length&amp;#39;];_0x67ab0e&amp;lt;_0x1753b1;_0x67ab0e++){_0x4a894e+=&amp;#39;%&amp;#39;+(&amp;#39;00&amp;#39;+_0x2e9442[&amp;#39;charCodeAt&amp;#39;](_0x67ab0e)[&amp;#39;toString&amp;#39;](0x10))[&amp;#39;slice&amp;#39;](-0x2);}_0x2e9442=decodeURIComponent(_0x4a894e);for(var _0x246dd5=0x0;_0x246dd5&amp;lt;0x100;_0x246dd5++){_0x3702d8[_0x246dd5]=_0x246dd5;}for(_0x246dd5=0x0;_0x246dd5&amp;lt;0x100;_0x246dd5++){_0x234ad1=(_0x234ad1+_0x3702d8[_0x246dd5]+_0x305a3a[&amp;#39;charCodeAt&amp;#39;](_0x246dd5%_0x305a3a[&amp;#39;length&amp;#39;]))%0x100;_0xd45a92=_0x3702d8[_0x246dd5];_0x3702d8[_0x246dd5]=_0x3702d8[_0x234ad1];_0x3702d8[_0x234ad1]=_0xd45a92;}_0x246dd5=0x0;_0x234ad1=0x0;for(var _0x39e824=0x0;_0x39e824&amp;lt;_0x2e9442[&amp;#39;length&amp;#39;];_0x39e824++){_0x246dd5=(_0x246dd5+0x1)%0x100;_0x234ad1=(_0x234ad1+_0x3702d8[_0x246dd5])%0x100;_0xd45a92=_0x3702d8[_0x246dd5];_0x3702d8[_0x246dd5]=_0x3702d8[_0x234ad1];_0x3702d8[_0x234ad1]=_0xd45a92;_0x5a1bee+=String[&amp;#39;fromCharCode&amp;#39;](_0x2e9442[&amp;#39;charCodeAt&amp;#39;](_0x39e824)^_0x3702d8[(_0x3702d8[_0x246dd5]+_0x3702d8[_0x234ad1])%0x100]);}return _0x5a1bee;};_0x5b60[&amp;#39;rc4&amp;#39;]=_0x43712e;_0x5b60[&amp;#39;data&amp;#39;]={};_0x5b60[&amp;#39;initialized&amp;#39;]=!![];}var _0x4be5de=_0x5b60[&amp;#39;data&amp;#39;][_0x4d4456];if(_0x4be5de===undefined){if(_0x5b60[&amp;#39;once&amp;#39;]===undefined){_0x5b60[&amp;#39;once&amp;#39;]=!![];}_0xa82079=_0x5b60[&amp;#39;rc4&amp;#39;](_0xa82079,_0x5a24e3);_0x5b60[&amp;#39;data&amp;#39;][_0x4d4456]=_0xa82079;}else{_0xa82079=_0x4be5de;}return _0xa82079;};if(typeof encode_version!==&amp;#39;undefined&amp;#39;&amp;amp;&amp;amp;encode_version===&amp;#39;sojson.v5&amp;#39;){function strencode(_0x50cb35,_0x1e821d){var _0x59f053={&amp;#39;MDWYS&amp;#39;:&amp;#39;0|4|1|3|2&amp;#39;,&amp;#39;uyGXL&amp;#39;:function _0x3726b1(_0x2b01e8,_0x53b357){return _0x2b01e8(_0x53b357);},&amp;#39;otDTt&amp;#39;:function _0x4f6396(_0x33a2eb,_0x5aa7c9){return _0x33a2eb&amp;lt;_0x5aa7c9;},&amp;#39;tPPtN&amp;#39;:function _0x3a63ea(_0x1546a9,_0x3fa992){return _0x1546a9%_0x3fa992;}};var _0xd6483c=_0x59f053[_0x5b60(&amp;#39;0x0&amp;#39;,&amp;#39;cEiQ&amp;#39;)][_0x5b60(&amp;#39;0x1&amp;#39;,&amp;#39;&amp;amp;]Gi&amp;#39;)](&amp;#39;|&amp;#39;),_0x1a3127=0x0;while(!![]){switch(_0xd6483c[_0x1a3127++]){case&amp;#39;0&amp;#39;:_0x50cb35=_0x59f053[_0x5b60(&amp;#39;0x2&amp;#39;,&amp;#39;ofbL&amp;#39;)](atob,_0x50cb35);continue;case&amp;#39;1&amp;#39;:code=&amp;#39;&amp;#39;;continue;case&amp;#39;2&amp;#39;:return _0x59f053[_0x5b60(&amp;#39;0x3&amp;#39;,&amp;#39;mLzQ&amp;#39;)](atob,code);case&amp;#39;3&amp;#39;:for(i=0x0;_0x59f053[_0x5b60(&amp;#39;0x4&amp;#39;,&amp;#39;J2rX&amp;#39;)](i,_0x50cb35[_0x5b60(&amp;#39;0x5&amp;#39;,&amp;#39;Z(CX&amp;#39;)]);i++){k=_0x59f053[&amp;#39;tPPtN&amp;#39;](i,len);code+=String[&amp;#39;fromCharCode&amp;#39;](_0x50cb35[_0x5b60(&amp;#39;0x6&amp;#39;,&amp;#39;s4(u&amp;#39;)](i)^_0x1e821d[&amp;#39;charCodeAt&amp;#39;](k));}continue;case&amp;#39;4&amp;#39;:len=_0x1e821d[_0x5b60(&amp;#39;0x7&amp;#39;,&amp;#39;!Mys&amp;#39;)];continue;}break;}}}else{alert(&amp;#39;&amp;#39;);}; 这一大串密密麻麻/花里胡哨的东西，了解过代码混淆的人，应该就知道是混淆过的代码。
用js工具解析后变成了比较容易理解的代码，这是一个解密的算法实现。格式化后的代码可以跳到解密代码部分查看。
解决办法 到这里，一般有3种方法来继续你的工作
把这一大段的js翻译成dart。缺点是耗时耗力，如果加密算法修改，你可能要重新来过。之前我的python爬虫就是这样的，不过那个加密算法才几行而已。 如果语言有工具支持运行js，那么就好办了。js自己跑js代码肯定没问题。而v8就是用c++写的，c++肯定有库可以调用。java1.8版本也有js引擎。c#则有jint。而python则是调用本机的node环境，速度不理想。而我写flutter没有找到这种方法。 用headless浏览器来解析页面，然后把拿到最终结果。把地址解析出来。在flutter中也就是使用webview插件。缺点很慢很重。 于是我想到了远程api来执行代码。
搭建基于nodejs的web服务 web代码 搜了一下，express貌似在nodejs里是很火的web框架。</description></item><item><title>js挖矿</title><link>https://kentxxq.com/contents/js%E6%8C%96%E7%9F%BF/</link><pubDate>Wed, 06 Mar 2019 09:58:00 +0000</pubDate><guid>https://kentxxq.com/contents/js%E6%8C%96%E7%9F%BF/</guid><description>前段时间有新闻说js挖矿，于是自己试了一下。写一写，留个印象。
什么是js挖矿 虚拟货币的产生，是通过一系列的计算得出的。而计算的过程需要强大的算力。这个计算过程就是挖矿。
js挖矿就是把挖矿过程从专用计算工具搬到了浏览器里。让页面的访问者进行计算。
发现js挖矿 如果有一天，你在浏览网页的时候，不经意发现旁边的360悬浮球提示cpu占用率持续在90%以上，那么小心了。你的电脑很有可能在挖矿！
如下方法检查
任务管理器查看 页面代码查看 如果没有故意隐藏的话，可以看到。否则还是看cpu更直接
有什么危害？ 可以看到，对于设备cpu的使用率，是可以进行调整的。同时可以对不同设备，用js进行判断是否启用挖矿代码。
所以一般而言，网站不会把cpu使用率弄到100%，否则用户会明显感受到电脑卡顿。如果是黑客行为，那可能就不会在乎这么多了。
但不用过于担心，因为它只会占用你的cpu运算能力，而不会读取你的个人数据。只要关闭网页，即可恢复正常。
会导致耗电量的提高，特别是手机/平板等移动设备。在页面正常运行时，续航将减少 会导致发热的问题。手机变成暖手宝，电脑设备风扇开始狂转散热 cpu负载过高，设备将会卡顿，影响到你的操作体验 电脑设备如果一直打开网页不关闭。长期如此，可能对设备寿命有影响(手机设备有更好的耗电管理，所以影响较小) 为什么部分站点还是会使用 一个网站的维护，是需要成本的。
一些网站有赞助商（需要愿者上钩，或者利益相关）。
一些网站有数不清的广告（广告可能无关联，且影响页面美观）。
一些网站是出于个人爱好，指不定哪天就关了（相当于阅后即焚?）。
而coinhive却能通过用户的一部分计算能力，直接提供盈利。经过用户同意后，网站有了一定的收入保障。而对用户而言，这是最最简单的免费赞助！
最新消息，coinhive停止服务 就在今天早上起来，我看了这则通知。
一句话概括：由于门罗币(monero)大跌了超过50%，几乎在崩溃的边缘。网费都要付不起了&amp;hellip;掰掰，老子不玩了。
影响 Coinhive的关闭，同类型的替代品还能坚持住吗？ 其实用Coinhive只是图个方便。网站完全可以自己搭建一个专用服务，还没有手续费。同时也非常简单:
coinhive-stratum-mining-proxy一个python实现 coin-hive-stratumtypescript参考后也实现了一个 对门罗币会有什么影响呢？ 几乎没有影响。js挖矿的算力对于那些大矿池来说，九牛一毛。同时大矿池的算力一直在增长。</description></item></channel></rss>