<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131319987-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-131319987-1');</script><meta name=author content="kentxxq"><meta name=keywords content="linux tar ntpdate truncate"><meta name=description content="记录一下常用的linux常用命令"><link rel=prev href=https://kentxxq.com/contents/%E4%B8%80%E4%B8%AA%E6%88%91%E9%9C%80%E8%A6%81%E7%9A%84win10/><link rel=next href=https://kentxxq.com/contents/linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/><link rel=canonical href=https://kentxxq.com/contents/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=icon type=image/png href=/favicon.png><title>linux常用命令 | kentxxq Blog</title><meta name=title content="linux常用命令 | kentxxq Blog"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","image":"https:\/\/kentxxq.com\/images/me/avatar.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kentxxq.com\/"},"articleSection":"posts","name":"linux常用命令","headline":"linux常用命令","description":"记录一下常用的linux常用命令","inLanguage":"zh","author":"kentxxq","creator":"kentxxq","publisher":{"@type":"Organization","name":"kentxxq","logo":{"@type":"ImageObject","url":"https:\/\/kentxxq.com\/images/me/avatar.jpg"}},"accountablePerson":"kentxxq","copyrightHolder":"kentxxq","copyrightYear":"2020","datePublished":"2020-06-09 23:47:00","dateModified":"2020-06-09 23:47:00","url":"https:\/\/kentxxq.com\/contents\/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4\/","keywords":["linux","tar","ntpdate","truncate"]}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/>Blog</a>
<a class=menu-item href=/categories/>Categories</a>
<a class=menu-item href=/tags/>Tags</a>
<a class=menu-item href=/about/>About</a></div></div></nav><main class=main><div class=container><article class=post-warp><header class=post-header><h1 class=post-title>linux常用命令</h1><div class=post-meta>Written by <a href=https://kentxxq.com/ rel=author>kentxxq</a>
with ♥
<span class=post-time>on <time datetime=2020-06-09>June 9, 2020</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=https://kentxxq.com/categories/%E7%AC%94%E8%AE%B0/>笔记</a></span>
|
<a href=#gitalk-container><span class=gitalk-comment-count itemprop=commentCount></span></a></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#常用命令>常用命令</a><ul><li><a href=#tar压缩解压>tar压缩、解压</a></li><li><a href=#时间同步>时间同步</a></li><li><a href=#清空文件>清空文件</a></li><li><a href=#开启bbr>开启bbr</a></li><li><a href=#使用yum镜像源>使用yum镜像源</a></li><li><a href=#终端中文显示>终端中文显示</a></li><li><a href=#删除7天前的文件>删除7天前的文件</a></li><li><a href=#查看进程的启动时间>查看进程的启动时间</a></li><li><a href=#端口连接情况>端口连接情况</a></li></ul></li><li><a href=#更新>更新</a></li></ul></nav></div></div><script type=text/javascript>window.onload=function(){var fix=$('.post-toc');var end=$('.post-comment');var fixTop=fix.offset().top,fixHeight=fix.height();var endTop,miss;var offsetTop=fix[0].offsetTop;$(window).scroll(function(){var docTop=Math.max(document.body.scrollTop,document.documentElement.scrollTop);if(end.length>0){endTop=end.offset().top;miss=endTop-docTop-fixHeight;}
if(fixTop<docTop){fix.css({'position':'fixed'});if((end.length>0)&&(endTop<(docTop+fixHeight))){fix.css({top:miss});}else{fix.css({top:0});}}else{fix.css({'position':'absolute'});fix.css({top:offsetTop});}})}</script><div class=post-content><blockquote><p>记录一下常用的linux常用命令。</p></blockquote><h2 id=常用命令>常用命令</h2><h3 id=tar压缩解压>tar压缩、解压</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># z是使用gzip </span>
<span style=color:#75715e># v是查看细节</span>
<span style=color:#75715e># f是指定文件</span>
<span style=color:#75715e># --strip-components=1 去掉一层解压目录</span>

<span style=color:#75715e># 打包</span>
tar -czvf dist.tgz dist/

<span style=color:#75715e># 解压</span>
tar -xzvf dist.tgz

<span style=color:#75715e># 打包隐藏文件</span>
<span style=color:#75715e># 通过 . 可以打包到隐藏文件 </span>
tar -czvf dist.tgz /dad/path/.
<span style=color:#75715e># 通过上级目录来打包</span>
tar -czvf dist.tgz /data/path
<span style=color:#75715e># 如果是在当前目录，可以手动指定</span>
tar -czvf dist.tgz tar -zcvf dist.tgz .<span style=color:#f92672>[</span>!.<span style=color:#f92672>]</span>* * 
</code></pre></div><h3 id=时间同步>时间同步</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo yum install ntp -y

ntpdate pool.ntp.org
</code></pre></div><h3 id=清空文件>清空文件</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 本来可以如此简单 </span>
&gt;file.txt
<span style=color:#75715e># 但是不属于你的文件呢？</span>
sudo bash -c <span style=color:#e6db74>&#34;&gt;file.txt&#34;</span>
<span style=color:#75715e># 于是就用新的命令,加sudo也很方便</span>
<span style=color:#75715e># 这里的s是大小的意思</span>
truncate -s <span style=color:#ae81ff>0</span> file.txt
</code></pre></div><h3 id=开启bbr>开启bbr</h3><p>bbr是一种浪费网络资源，提升网络速度和稳定性的通讯手段。</p><p>centos8默认内核4.18，不用升级内核，即可启动。否则需要用升级内核。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;net.core.default_qdisc=fq&#34;</span> &gt;&gt; /etc/sysctl.conf
echo <span style=color:#e6db74>&#34;net.ipv4.tcp_congestion_control=bbr&#34;</span> &gt;&gt; /etc/sysctl.conf
<span style=color:#75715e># 生效</span>
sysctl -p
<span style=color:#75715e># 验证</span>
lsmod | grep bbr
</code></pre></div><h3 id=使用yum镜像源>使用yum镜像源</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
</code></pre></div><h3 id=终端中文显示>终端中文显示</h3><h4 id=查看已有的字符编码集>查看已有的字符编码集</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>locale -a
</code></pre></div><h4 id=如果没有zh_cnutf-8>如果没有zh_CN.UTF-8</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo yum install -y langpacks-zh_CN
</code></pre></div><h4 id=使用中文>使用中文</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim /etc/locale.conf
LANG<span style=color:#f92672>=</span>zh_CN.UTF-8
</code></pre></div><p>或<code>localectl set-locale LANG=zh_CN.UTF8</code></p><h3 id=删除7天前的文件>删除7天前的文件</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>find /data/weblog/ -name <span style=color:#e6db74>&#39;*.log.*&#39;</span> -type f -mtime +7 -exec rm -f <span style=color:#f92672>{}</span> <span style=color:#ae81ff>\;</span>
</code></pre></div><h3 id=查看进程的启动时间>查看进程的启动时间</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ps -eo pid,lstart,etime | grep <span style=color:#ae81ff>1310</span>
<span style=color:#ae81ff>1310</span> Sat Aug <span style=color:#ae81ff>10</span> 10:21:25 <span style=color:#ae81ff>2019</span> 242-07:26:58
<span style=color:#75715e># 前面是启动时间，后面是启动了242天</span>
</code></pre></div><h3 id=端口连接情况>端口连接情况</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 查看监听的端口</span>
netstat -ltnp
<span style=color:#75715e># 统计外部ip，端口连接数量</span>
netstat -ant |awk <span style=color:#e6db74>&#39;{print $5}&#39;</span> | awk -F <span style=color:#e6db74>&#39;:&#39;</span> <span style=color:#e6db74>&#39;{count[$1]++;} END {for(i in count) {print i &#34;\t&#34; count[i]}}&#39;</span>
</code></pre></div><h2 id=更新>更新</h2><p><strong>20200609</strong>: 初版
<strong>20200717</strong>：新增<code>端口连接情况</code></p></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>kentxxq</span></p><p class=copyright-item><span>Link:</span>
<a href=https://kentxxq.com/contents/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/><script>document.write(decodeURI(location.origin+location.pathname))</script></a></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://kentxxq.com/tags/linux/>#linux</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://kentxxq.com/>home</a></span></section></div><div class=post-nav><a href=https://kentxxq.com/contents/%E4%B8%80%E4%B8%AA%E6%88%91%E9%9C%80%E8%A6%81%E7%9A%84win10/ class=prev rel=prev title=一个我需要的win10><i class="iconfont icon-left"></i>&nbsp;一个我需要的win10</a>
<a href=https://kentxxq.com/contents/linux%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/ class=next rel=next title=linux问题记录>linux问题记录&nbsp;<i class="iconfont icon-right"></i></a></div></article><div class=post-comment><div id=disqus_thread></div><script>var disqus_config=function(){this.page.title="linux常用命令"
this.page.url="https://kentxxq.com/contents/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"};(function(){var d=document,s=d.createElement('script');s.src='https://kentxxq.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript></div></div></main><footer class=footer><a href=https://beian.miit.gov.cn/ target=_blank rel="external nofollow">湘ICP备2021002319号-1</a></footer><script src=/js/vendor_no_gallery.min.js async></script><script src=https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js></script></div></body></html>