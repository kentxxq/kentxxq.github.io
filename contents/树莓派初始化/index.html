<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131319987-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-131319987-1')</script><meta name=author content="kentxxq"><meta name=keywords content="raspberry pi linux 硬件 温度监控 安装桌面 vncserver net5 代理配置"><meta name=description content="老早以前就对树莓派有了一定的了解，但是觉得也不算特别便宜，就没买。最近因为听说苹果的m1芯片很厉害，于是对arm架构的东西又有了兴趣。未来很多东西都会在云上运行，用户端方面arm的节能和高效就非常厉害了。于是一狠心，开始折腾自己..."><meta property="og:title" content="树莓派初始化"><meta property="og:description" content="老早以前就对树莓派有了一定的了解，但是觉得也不算特别便宜，就没买。最近因为听说苹果的m1芯片很厉害，于是对arm架构的东西又有了兴趣。未来很多东西都会在云上运行，用户端方面arm的节能和高效就非常厉害了。于是一狠心，开始折腾自己..."><meta property="og:type" content="article"><meta property="og:url" content="https://kentxxq.com/contents/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-13T21:36:00+08:00"><meta property="article:modified_time" content="2021-03-15T00:00:44+08:00"><link rel=prev href=https://kentxxq.com/contents/%E5%85%B3%E4%BA%8Ehugo%E7%9A%84seo%E4%BC%98%E5%8C%96/><link rel=canonical href=https://kentxxq.com/contents/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=icon type=image/png href=/favicon.png><title>树莓派初始化 | kentxxq Blog</title><meta name=title content="树莓派初始化 | kentxxq Blog"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","image":"https:\/\/kentxxq.com\/images/me/avatar.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kentxxq.com\/"},"articleSection":"posts","name":"树莓派初始化","headline":"树莓派初始化","description":"老早以前就对树莓派有了一定的了解，但是觉得也不算特别便宜，就没买。最近因为听说苹果的m1芯片很厉害，于是对arm架构的东西又有了兴趣。未来很多东西都会在云上运行，用户端方面arm的节能和高效就非常厉害了。于是一狠心，开始折腾自己...","inLanguage":"zh","author":"kentxxq","creator":"kentxxq","publisher":{"@type":"Organization","name":"kentxxq","logo":{"@type":"ImageObject","url":"https:\/\/kentxxq.com\/images/me/avatar.jpg"}},"accountablePerson":"kentxxq","copyrightHolder":"kentxxq","copyrightYear":"2021","datePublished":"2021-03-13 21:36:00","dateModified":"2021-03-15 00:00:44","url":"https:\/\/kentxxq.com\/contents\/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96\/","keywords":["raspberry pi","linux","硬件","温度监控","安装桌面","vncserver","net5","代理配置"]}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a></div></div></nav><main class=main><div class=container><article class=post-warp><header class=post-header><h1 class=post-title>树莓派初始化</h1><div class=post-meta>Written by <a href=https://kentxxq.com/ rel=author>kentxxq</a>
with ♥
<span class=post-time>on <time datetime=2021-03-13>March 13, 2021</time></span>
in
<i class="iconfont icon-folder"></i><span class=post-category><a href=https://kentxxq.com/categories/%E7%AC%94%E8%AE%B0/>笔记</a></span>
|
<a href=#gitalk-container><span class=gitalk-comment-count itemprop=commentCount></span></a></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><a href=#硬件方面>硬件方面</a></li><li><a href=#刷机>刷机</a><ul><li><a href=#使用imager刷机ubuntu>使用imager刷机ubuntu</a></li><li><a href=#关于recalbox>关于RecalBox</a></li></ul></li><li><a href=#初始化配置>初始化配置</a><ul><li><a href=#ssh>ssh</a></li><li><a href=#替换国内源>替换国内源</a></li></ul></li><li><a href=#安装需要的软件>安装需要的软件</a><ul><li><a href=#温度监控>温度监控</a></li><li><a href=#安装snap-store商店>安装snap-store商店</a></li><li><a href=#wifi工具>wifi工具</a></li><li><a href=#流量监控>流量监控</a></li><li><a href=#安装桌面>安装桌面</a></li><li><a href=#安装net5>安装net5</a></li><li><a href=#vnc安装和配置>vnc安装和配置</a></li></ul></li><li><a href=#代理配置>代理配置</a><ul><li><a href=#shell代理配置>shell代理配置</a></li><li><a href=#clash代理>clash代理</a></li><li><a href=#snap代理>snap代理</a></li></ul></li></ul></nav></div></div><script type=text/javascript>window.onload=function(){var a=$('.post-toc'),b=$('.post-comment'),f=a.offset().top,d=a.height(),g=a[0].offsetTop,e,c;$(window).scroll(function(){var h=Math.max(document.body.scrollTop,document.documentElement.scrollTop);b.length>0&&(c=b.offset().top,e=c-h-d),f<h?(a.css({position:'fixed'}),b.length>0&&c<h+d?a.css({top:e}):a.css({top:0})):(a.css({position:'absolute'}),a.css({top:g}))})}</script><div class=post-content><blockquote><p>老早以前就对树莓派有了一定的了解，但是觉得也不算特别便宜，就没买。最近因为听说苹果的m1芯片很厉害，于是对arm架构的东西又有了兴趣。未来很多东西都会在云上运行，用户端方面arm的节能和高效就非常厉害了。于是一狠心，开始折腾自己&mldr;</p></blockquote><h2 id=硬件方面>硬件方面</h2><ol><li><strong>树莓派4b 4gb</strong></li><li><strong>32GB的tf存储卡</strong>，做硬盘用</li><li><strong>读卡器</strong>，给tf卡写数据和备份用的</li><li><strong>电源线是5V/3A的type-c</strong>，也就是说最多15W的功率</li><li><strong>一根网线，网口支持千兆哟</strong>。我是比较推荐初期先用网线的。网线的稳定性是wifi不能比的，我笔记本宁愿插个转接头都要用网线</li><li>上面都是必需品，其他的话例如外壳、风扇、散热片、hdmi线都看情况吧。</li></ol><h2 id=刷机>刷机</h2><h3 id=使用imager刷机ubuntu>使用imager刷机ubuntu</h3><p>网上有很多资料都是树莓派自制的系统，但是我比较喜欢统一linux发行版，减小出错概率。所以得刷成<code>ubuntu server 20.04 LTS</code>版本。</p><p>直接去<a href=https://www.raspberrypi.org/software/>官网下载</a>imager，然后安装后。就可以通过图形界面选择需要的系统了。但是因为网络太慢，所以我直接去<a href=https://ubuntu.com/download/server/arm>ubuntu官网下载</a>镜像文件，然后<code>use custom</code>写入tf卡。</p><h3 id=关于recalbox>关于RecalBox</h3><p>RecalBox是一个独立的系统。支持很多的模拟器，例如psp、Game boy等等。同时重要的一点是<strong>内置有kodi</strong>。这就变成了一个游戏机+媒体中心。我后面是肯定会刷来玩玩的，家里的电视是通过app来观看的，体验很不好。有想法自己折腾一下。</p><h2 id=初始化配置>初始化配置</h2><h3 id=ssh>ssh</h3><ol><li>通过路由器或者ip扫描工具拿到ip，然后ssh上去会提示修改密码</li><li>默认密码是ubuntu</li></ol><h3 id=替换国内源>替换国内源</h3><p>文件位置<code>/etc/apt/sources.list</code>。</p><p>可以把之前的备份掉( sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak )，然后手工创建( sudo vi /etc/apt/sources.list )。内容如下</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-security main restricted universe multiverse
</code></pre></div><p><strong>更新</strong>: sudo apt update -y<br><strong>升级</strong>: sudo apt upgrade -y</p><h2 id=安装需要的软件>安装需要的软件</h2><h3 id=温度监控>温度监控</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install lm-sensors
<span style=color:#75715e># 观察模式</span>
watch sensors
</code></pre></div><h3 id=安装snap-store商店>安装snap-store商店</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo snap install snap-store
</code></pre></div><h3 id=wifi工具>wifi工具</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install wireless-tools
<span style=color:#75715e># 查看wifi设备信息</span>
iwconfig
</code></pre></div><h3 id=流量监控>流量监控</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo apt install nload
<span style=color:#75715e># 键盘左右方向键，切换网卡</span>
nload
</code></pre></div><h3 id=安装桌面>安装桌面</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># 安装一个小工具</span>
sudo apt install tasksel
<span style=color:#75715e># 看可以装哪些版本</span>
tasksel --list-tasks
<span style=color:#75715e># 安装桌面套件</span>
sudo tasksel install ubuntu-desktop
<span style=color:#75715e># 重启生效</span>
reboot
</code></pre></div><h3 id=安装net5>安装net5</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># 官方安装脚本</span>
wget https://dot.net/v1/dotnet-install.sh
<span style=color:#75715e># 执行权限 </span>
chmod +x dotnet-install.sh
<span style=color:#75715e># 默认是稳定版，即3.1。-c 指定版本 Current是net5</span>
./dotnet-install.sh -c Current
<span style=color:#75715e># 加入到~/.bashrc结尾</span>
export PATH<span style=color:#f92672>=</span>$PATH:$HOME/.dotnet
export DOTNET_ROOT<span style=color:#f92672>=</span>$PATH:$HOME/.dotnet
<span style=color:#75715e># 环境生效</span>
source ~/.bashrc <span style=color:#75715e># 也可以新开窗口</span>
<span style=color:#75715e># 验证效果</span>
dotnet --version
</code></pre></div><h3 id=vnc安装和配置>vnc安装和配置</h3><p>这个东西不太熟悉，但是按我这样操作是没问题。自己也可以试试，主要是xstartup文件要自己参考资料。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e># 安装</span>
sudo apt install tightvncserver gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal gnome-session-flashback gdm3
<span style=color:#75715e># 启动0号窗口 指定分辨率，色位，dpi</span>
tightvncserver :0 -geometry 1280x720 -depth <span style=color:#ae81ff>24</span> -dpi <span style=color:#ae81ff>96</span>
</code></pre></div><p>修改<code>/home/用户/.vnc/xstartup</code>文件，此文件的权限应该是775</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=color:#75715e>#!/bin/sh
</span><span style=color:#75715e></span>
xrdb $HOME/.Xresources
xsetroot -solid grey
<span style=color:#75715e>#x-terminal-emulator -geometry 80x24+10+10 -ls -title &#34;$VNCDESKTOP Desktop&#34; &amp;</span>
<span style=color:#75715e>#x-window-manager &amp;</span>
<span style=color:#75715e># Fix to make GNOME work</span>
export XKL_XMODMAP_DISABLE<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
/etc/X11/Xsession

<span style=color:#75715e># 下面这一段是我加上去的</span>
unset SESSION_MANAGER
unset DBUS_SESSION_BUS_ADDRESS
export XKL_XMODMAP_DISABLE<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
export XDG_CURRENT_DESKTOP<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;GNOME-Flashback:GNOME&#34;</span>
export XDG_MENU_PREFIX<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;gnome-flashback-&#34;</span>
gnome-session --session<span style=color:#f92672>=</span>gnome-flashback-metacity --disable-acceleration-check &amp;
</code></pre></div><h2 id=代理配置>代理配置</h2><p>下面的命令推荐使用<code>alias</code>来简写，一直手敲太累了。。。</p><h3 id=shell代理配置>shell代理配置</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>export http_proxy<span style=color:#f92672>=</span>http://clash_ip:7890
export https_proxy<span style=color:#f92672>=</span>http://clash_ip:7890
</code></pre></div><h3 id=clash代理>clash代理</h3><ol><li>允许Allow Lan</li><li>防火墙允许通过应用。windows安全中心=》防火墙和网络保护=》允许应用通过防火墙=》<img src=/images/raspberry_pi/%E9%98%B2%E7%81%AB%E5%A2%99.png alt=配置图></li></ol><h3 id=snap代理>snap代理</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>sudo snap set system proxy.http<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://clash_ip:7890&#34;</span>
sudo snap set system proxy.https<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;http://clash_ip:7890&#34;</span>
</code></pre></div></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>kentxxq</span></p><p class=copyright-item><span>Link:</span>
<a href=https://kentxxq.com/contents/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96/><script>document.write(decodeURI(location.origin+location.pathname))</script></a></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://kentxxq.com/tags/raspberry-pi/>#raspberry pi</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://kentxxq.com/>home</a></span></section></div><div class=post-nav><a href=https://kentxxq.com/contents/%E5%85%B3%E4%BA%8Ehugo%E7%9A%84seo%E4%BC%98%E5%8C%96/ class=prev rel=prev title=关于hugo的SEO优化><i class="iconfont icon-left"></i>&nbsp;关于hugo的SEO优化</a></div></article><div class=post-comment><div id=disqus_thread></div><script>var disqus_config=function(){this.page.title="树莓派初始化",this.page.url="https://kentxxq.com/contents/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%9D%E5%A7%8B%E5%8C%96/"};(function(){var a=document,b=a.createElement('script');b.src='https://kentxxq.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript></div></div></main><footer class=footer><a href=https://beian.miit.gov.cn/ target=_blank rel="external nofollow">湘ICP备2021002319号-1</a></footer><link href=//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css rel=stylesheet><script src=/js/vendor_gallery.min.js async></script><script src=https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js></script></div></body></html>