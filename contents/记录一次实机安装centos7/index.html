<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<title class=pjax-title>记录一次实机安装Centos7 - kentxxq Blog</title><meta name=Description content="之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下"><meta property="og:title" content="记录一次实机安装Centos7">
<meta property="og:description" content="之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下">
<meta property="og:type" content="article">
<meta property="og:url" content="https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2019-04-15T11:59:00+00:00">
<meta property="article:modified_time" content="2021-03-20T13:39:19+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="记录一次实机安装Centos7">
<meta name=twitter:description content="之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下">
<meta name=application-name content="kentxxq">
<meta name=apple-mobile-web-app-title content="kentxxq">
<meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/><link rel=prev href=https://kentxxq.com/contents/%E5%9C%A8mac%E4%B8%8Aheic%E8%BD%ACjpg%E6%88%96png/><link rel=next href=https://kentxxq.com/contents/%E7%94%B5%E5%BD%B1_%E7%87%95%E5%B0%BE%E8%9D%B6/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=preload as=style onload="this.onload=null,this.rel='stylesheet'" href=/lib/fontawesome-free/all.min.css>
<noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload as=style onload="this.onload=null,this.rel='stylesheet'" href=/lib/animate/animate.min.css>
<noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"记录一次实机安装Centos7","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kentxxq.com\/contents\/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7\/"},"genre":"posts","keywords":"centos","wordcount":1759,"url":"https:\/\/kentxxq.com\/contents\/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7\/","datePublished":"2019-04-15T11:59:00+00:00","dateModified":"2021-03-20T13:39:19+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"kentxxq"},"description":"之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下"}</script></head>
<body header-desktop=fixed header-mobile=auto><script type=text/javascript>function setTheme(a){document.body.setAttribute('theme',a)}function saveTheme(a){window.localStorage&&localStorage.setItem('theme',a)}function getMeta(b){const a=document.getElementsByTagName('meta');for(let c=0;c<a.length;c++)if(a[c].getAttribute('name')===b)return a[c];return''}if(window.localStorage&&localStorage.getItem('theme')){let a=localStorage.getItem('theme');a==='light'||a==='dark'||a==='black'?setTheme(a):window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?setTheme('dark'):setTheme('light')}else''==='light'||''==='dark'||''==='black'?(setTheme(''),saveTheme('')):(saveTheme('auto'),window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches?setTheme('dark'):setTheme('light'));let themeColorMeta=getMeta('theme-color');document.body.getAttribute('theme')!='light'&&(themeColorMeta.content='#000000')</script>
<div id=back-to-top></div>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="kentxxq Blog">kentxxq Blog</a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/posts/> Blog </a><a class=menu-item href=/categories/> Categories </a><a class=menu-item href=/tags/> Tags </a><a class=menu-item href=/about/> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-desktop title=搜索>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-desktop title=清空>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="kentxxq Blog">kentxxq Blog</a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=# onclick=return!1 class="search-button search-toggle" id=search-toggle-mobile title=搜索>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=# onclick=return!1 class="search-button search-clear" id=search-clear-mobile title=清空>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=# onclick=return!1 class=search-cancel id=search-cancel-mobile>
取消
</a>
</div><a class=menu-item href=/posts/ title>Blog</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/about/ title>About</a><a href=# onclick=return!1 class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>目录</h2>
<div class=toc-content id=toc-content-auto></div>
</div><script>document.getElementsByTagName("main")[0].setAttribute("pageStyle","wide")</script><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC","true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">记录一次实机安装Centos7</h1><div class=post-meta>
<div class=post-meta-line>
<span class=post-author><i class="author fas fa-user-circle fa-fw"></i><a href=https://kentxxq.com title=Author target=_blank rel="noopener noreffer author" class=author>kentxxq</a>
</span>&nbsp;<span class=post-category>收录于 </span>&nbsp;<span class=post-category>类别 <a href=/categories/%E7%AC%94%E8%AE%B0/><i class="far fa-folder fa-fw"></i>笔记</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2019-04-15>2019-04-15</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime=2021-03-20>2021-03-20</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1759 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 4 分钟&nbsp;</div>
</div><div class="details toc" id=toc-static kept>
<div class="details-summary toc-title">
<span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li><a href=#安装经验>安装经验</a></li>
<li><a href=#遇到的问题>遇到的问题</a>
<ul>
<li><a href=#grub2-timeout问题>grub2-timeout问题</a></li>
<li><a href=#安装gnome桌面>安装GNOME桌面</a></li>
<li><a href=#开启远程桌面>开启远程桌面</a></li>
<li><a href=#自动挂载磁盘>自动挂载磁盘</a></li>
</ul>
</li>
<li><a href=#知识拓展>知识拓展</a>
<ul>
<li><a href=#efi和bios启动流程>efi和bios启动流程</a></li>
<li><a href=#验证efi还是bios>验证efi还是bios</a></li>
<li><a href=#指定用户sudo免密码>指定用户sudo免密码</a></li>
</ul>
</li>
<li><a href=#总结>总结</a></li>
</ul>
</nav></div>
</div><div class=content id=content><blockquote>
<p>之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。</p>
<p>也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次+吧，特意来记录一下。</p>
</blockquote>
<h2 id=安装经验>安装经验</h2>
<p>交代一下安装linux的经验</p>
<ol>
<li>阿里云，虚拟机(这两个都属于虚拟环境了)</li>
<li>hp-gen6-380(比较老的服务器机型)</li>
<li>家用e3v3+gpu750ti+华硕gaming主板(安装的是的fedora29，所有的组件都很新，问题也不少)</li>
</ol>
<p>而这次安装在普通pc上，却遇到了问题。让我觉得还是很有必要系统性的了解一下。</p>
<h2 id=遇到的问题>遇到的问题</h2>
<h3 id=grub2-timeout问题>grub2-timeout问题</h3>
<p>启动了开机按钮以后，一直卡住在这个界面，需要手动操作才能完成点击。</p>
<p><img class=lazyload data-src=/images/server/%e5%86%85%e6%a0%b8%e5%8d%a1%e4%bd%8f%e7%95%8c%e9%9d%a2.jpg data-srcset="/images/server/%e5%86%85%e6%a0%b8%e5%8d%a1%e4%bd%8f%e7%95%8c%e9%9d%a2.jpg, /images/server/%e5%86%85%e6%a0%b8%e5%8d%a1%e4%bd%8f%e7%95%8c%e9%9d%a2.jpg 1.5x, /images/server/%e5%86%85%e6%a0%b8%e5%8d%a1%e4%bd%8f%e7%95%8c%e9%9d%a2.jpg 2x" data-sizes=auto alt=/images/server/内核卡住界面.jpg title=内核卡住界面></p>
<p>解决方案:</p>
<p>把超时时间设置为0，直接跳过内核选择界面。<strong>进入默认选中的第一个内核</strong></p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### 路径</span>
<span class=o>[</span>root@YHcentos7 default<span class=o>]</span><span class=c1># pwd</span>
/etc/default
<span class=c1>### 查看配置文件</span>
<span class=o>[</span>root@YHcentos7 default<span class=o>]</span><span class=c1># cat grub </span>
<span class=nv>GRUB_TIMEOUT</span><span class=o>=</span><span class=m>0</span>
<span class=nv>GRUB_DISTRIBUTOR</span><span class=o>=</span><span class=s2>&#34;</span><span class=k>$(</span>sed <span class=s1>&#39;s, release .*$,,g&#39;</span> /etc/system-release<span class=k>)</span><span class=s2>&#34;</span>
<span class=nv>GRUB_DEFAULT</span><span class=o>=</span>saved
<span class=nv>GRUB_DISABLE_SUBMENU</span><span class=o>=</span><span class=nb>true</span>
<span class=nv>GRUB_TERMINAL_OUTPUT</span><span class=o>=</span><span class=s2>&#34;console&#34;</span>
<span class=nv>GRUB_CMDLINE_LINUX</span><span class=o>=</span><span class=s2>&#34;crashkernel=auto rhgb quiet&#34;</span>
<span class=nv>GRUB_DISABLE_RECOVERY</span><span class=o>=</span><span class=s2>&#34;true&#34;</span>
<span class=c1>### bios系统生成boot配置</span>
<span class=o>[</span>root@YHcentos7 default<span class=o>]</span><span class=c1># grub2-mkconfig -o /boot/grub2/grub.cfg</span>
<span class=nv>GRUB_DISABLE_RECOVERY</span><span class=o>=</span><span class=s2>&#34;true&#34;</span>
<span class=c1>### uefi系统生成boot配置</span>
<span class=o>[</span>root@YHcentos7 default<span class=o>]</span><span class=c1># grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg</span>
<span class=c1>### 重启</span>
<span class=o>[</span>root@YHcentos7 default<span class=o>]</span><span class=c1># reboot</span>
</code></pre></td></tr></table>
</div>
</div><hr>
<p><strong>如果你想知道为什么不能启用timeout进入指定的内核，请看下面</strong></p>
<p>在重装了差不多5次以后，我其中的一次安装后，居然没有问题！导致我后续重装了大概50次，找到了原因。</p>
<p>我的u盘启动盘，是用<a href=https://rufus.ie/ target=_blank rel="noopener noreffer">rufus</a>制作的。用的<a href=https://www.centos.org/download/ target=_blank rel="noopener noreffer">centos</a>dvd版本的镜像。</p>
<p>插入u盘后，引导设备如下</p>
<p><img class=lazyload data-src=/images/server/%e4%b8%bb%e6%9d%bf%e5%bc%95%e5%af%bc%e5%9b%be.jpg data-srcset="/images/server/%e4%b8%bb%e6%9d%bf%e5%bc%95%e5%af%bc%e5%9b%be.jpg, /images/server/%e4%b8%bb%e6%9d%bf%e5%bc%95%e5%af%bc%e5%9b%be.jpg 1.5x, /images/server/%e4%b8%bb%e6%9d%bf%e5%bc%95%e5%af%bc%e5%9b%be.jpg 2x" data-sizes=auto alt=/images/server/主板引导图.jpg title=主板引导图></p>
<p>可以看到，除了128gb的硬盘，还有<strong>2个可选项</strong>！</p>
<p>选择第一个，也就是<code>UEFI启动</code>，在后续的系统分区中，你必须给<code>/boot/efi</code>指定分区。分区文件类型为efi。如果没有的话，会报错<code>no valid bootloader target device found centos 7 for a uefi installation</code></p>
<p>选择第三个，也就是<code>BIOS启动</code>，则可以不用建立/boot/efi分区，成功timeout后进入系统。</p>
<p>下图就是bios启动，安装系统后的分区结构。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### sda2用做了swap</span>
<span class=o>[</span>root@YHcentos7 ~<span class=o>]</span><span class=c1># df -h</span>
文件系统        容量  已用  可用 已用% 挂载点
/dev/sda3       110G  4.0G  107G    4% /
devtmpfs        7.7G     <span class=m>0</span>  7.7G    0% /dev
tmpfs           7.8G     <span class=m>0</span>  7.8G    0% /dev/shm
tmpfs           7.8G  9.6M  7.7G    1% /run
tmpfs           7.8G     <span class=m>0</span>  7.8G    0% /sys/fs/cgroup
/dev/sda1       497M  199M  298M   41% /boot
tmpfs           1.6G   12K  1.6G    1% /run/user/42
tmpfs           1.6G     <span class=m>0</span>  1.6G    0% /run/user/0
</code></pre></td></tr></table>
</div>
</div><p><code>UEFI启动</code>只能按照之前的办法来跳过(我没有找到解决办法)。</p>
<p><code>BIOS启动</code>则可以正常显示timeout，进入默认选中的内核。</p>
<h3 id=安装gnome桌面>安装GNOME桌面</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### 安装命令</span>
yum groupinstall <span class=s2>&#34;GNOME Desktop&#34;</span> -y
<span class=c1>### 切换系统环境</span>
<span class=c1># 开启桌面</span>
systemctl set-default graphical.target 
<span class=c1># 关闭桌面</span>
systemctl set-default multi-user.target 
<span class=c1># 切换桌面 3为命令行 5为桌面</span>
init <span class=m>3</span> 
init <span class=m>5</span>
<span class=c1>### 查看gnome版本</span>
yum list installed <span class=p>|</span>grep gnome
<span class=c1>### 查看使用的是x window还是wayland</span>
<span class=c1># 查看已经登陆的session</span>
loginctl
<span class=c1># 把桌面的那个填到下面去即可</span>
loginctl show-session &lt;SESSION_ID&gt; -p Type
<span class=c1>### 卸载命令</span>
yum groupremove <span class=s2>&#34;GNOME Desktop&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=开启远程桌面>开启远程桌面</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### 安装xrdp</span>
yum -y install xrdp
<span class=c1>### 启动服务</span>
systemctl start xrdp.service
<span class=c1>### 验证端口</span>
netstat -ltn
<span class=c1>### 如果不能远程访问，关闭防火墙</span>
systemctl stop firewalld.service
</code></pre></td></tr></table>
</div>
</div><h3 id=自动挂载磁盘>自动挂载磁盘</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### fdisk分区硬盘后用xfs格式来格式化</span>
mkfs.xfs /dev/sdb1
<span class=c1>### 挂载到/data目录</span>
mkdir /data
mount /dev/sdb1 /data
<span class=c1>### 查看磁盘uuid</span>
blkid
<span class=c1>### 在/etc/fstab下加上这个</span>
<span class=nv>UUID</span><span class=o>=</span>15f87ab4-176a-46a3-bc07-60ef5f2a4129 /                       xfs     defaults        <span class=m>0</span> <span class=m>0</span>
<span class=nv>UUID</span><span class=o>=</span>adfb7be3-85ce-49c7-992b-e5a0f299f3dd swap                    swap    defaults        <span class=m>0</span> <span class=m>0</span>
<span class=nv>UUID</span><span class=o>=</span>cd51618b-2615-4d6e-9abc-3a091c8fb820 /data                   xfs     defaults        <span class=m>0</span> <span class=m>0</span>
<span class=c1>### 测试一下有没有问题</span>
mount -a
<span class=c1>### 没问题重启一下肯定也没问题了</span>
reboot
</code></pre></td></tr></table>
</div>
</div><h2 id=知识拓展>知识拓展</h2>
<p><a href=https://www.gnu.org/software/grub/manual/grub/html_node/Simple-configuration.html target=_blank rel="noopener noreffer">grub2的配置文档</a></p>
<h3 id=efi和bios启动流程>efi和bios启动流程</h3>
<p>Boot Process under BIOS</p>
<ol>
<li>System switched on - Power On Self Test, or POST process</li>
<li>After POST BIOS initializes the necessary system hardware for booting (disk, keyboard controllers etc.)BIOS launches the first 440 bytes (MBR boot code region) of the first disk in the BIOS disk order</li>
<li>The MBR boot code then takes control from BIOS and launches its next stage code (if any) (mostly bootloader code)</li>
<li>The launched (2nd stage) code (actual bootloader) then reads its support and config files</li>
<li>Based on the data in its config files, the bootloader loads the kernel and initramfs into system memory (RAM) and launches the kernel</li>
</ol>
<p>Boot Process under UEFI</p>
<ol>
<li>System switched on - Power On Self Test, or POST process.</li>
<li>UEFI firmware is loaded.</li>
<li>Firmware initializes the hardware required for booting.Firmware then reads its Boot Manager data to determine which UEFI application to be launched and from where (i.e. from which disk and partition).</li>
<li>Firmware then launches the UEFI application as defined in the boot entry in the firmware&rsquo;s boot manager.</li>
<li>The launched UEFI application may launch another application (in case of UEFI Shell or a boot manager like rEFInd) or the kernel and initramfs (in case of a bootloader like GRUB) depending on how the UEFI application was configured.</li>
</ol>
<h3 id=验证efi还是bios>验证efi还是bios</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=c1>### 进入/sys/firmware</span>
<span class=nb>cd</span> /sys/firmware
<span class=c1>### 如果有efi文件夹，就是efi。否则就是bios</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=指定用户sudo免密码>指定用户sudo免密码</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>vi /etc/sudoers
<span class=c1>### 加到root用户下面</span>
your_user_name <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span> NOPASSWD: ALL

<span class=c1>### ubuntu 20.04 LTS</span>
<span class=c1># 加在这个位置</span>
<span class=c1># Allow members of group sudo to execute any command</span>
%sudo   <span class=nv>ALL</span><span class=o>=(</span>ALL:ALL<span class=o>)</span> ALL
kentxxq <span class=nv>ALL</span><span class=o>=(</span>ALL<span class=o>)</span>    NOPASSWD: ALL
</code></pre></td></tr></table>
</div>
</div><h2 id=总结>总结</h2>
<p>UEFI可以有无限的分区。可以识别2TB以上的硬盘。</p>
<p>bios只能弄一个拓展分区，然后无限拓展。一旦上层出现错误，就会导致不可用。不过够用了。</p>
<p>以后专门的存储服务器，就用uefi来安装。反正也不需要升级什么的，直接关闭掉内核的选择。</p>
<p>bios的就通过nfs直接挂载存储服务器磁盘。</p>
</div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>更新于 2021-03-20</span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md></div>
<div class=post-info-share>
<span><a href=# onclick=return!1 title="分享到 Twitter" data-sharer=twitter data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7 data-hashtags=centos><i class="fab fa-twitter fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Facebook" data-sharer=facebook data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-hashtag=centos><i class="fab fa-facebook-square fa-fw"></i></a><a href=# onclick=return!1 title="分享到 WhatsApp" data-sharer=whatsapp data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7 data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Line" data-sharer=line data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a><a href=# onclick=return!1 title="分享到 微博" data-sharer=weibo data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7><i class="fab fa-weibo fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Myspace" data-sharer=myspace data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7 data-description=之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下><i data-svg-src=/lib/simple-icons/icons/myspace.min.svg></i></a><a href=# onclick=return!1 title="分享到 Blogger" data-sharer=blogger data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7 data-description=之前安装centos，都是在阿里云，虚拟机，还有hp-gen6-380的服务器上面安装。也就是说实体机的操作经验，只有一个比较老的hp服务器。而这次使用普通pc机来安装，遇到了不少的问题。重装了大概有50次以上吧，特意来记录一下><i class="fab fa-blogger fa-fw"></i></a><a href=# onclick=return!1 title="分享到 Evernote" data-sharer=evernote data-url=https://kentxxq.com/contents/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%AE%9E%E6%9C%BA%E5%AE%89%E8%A3%85centos7/ data-title=记录一次实机安装Centos7><i class="fab fa-evernote fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/centos/>centos</a></section>
<section>
<span><a href=# onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span>
</section>
</div>
<div class=post-nav><a href=/contents/%E5%9C%A8mac%E4%B8%8Aheic%E8%BD%ACjpg%E6%88%96png/ class=prev rel=prev title=在mac上HEIC转JPG或PNG><i class="fas fa-angle-left fa-fw"></i>在mac上HEIC转JPG或PNG</a>
<a href=/contents/%E7%94%B5%E5%BD%B1_%E7%87%95%E5%B0%BE%E8%9D%B6/ class=next rel=next title=电影_燕尾蝶>电影_燕尾蝶<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>1993 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://kentxxq.com target=_blank rel="noopener noreferrer">kentxxq</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a> | <a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000934"><img src=/备案图标.png style=display:inline-block>湘公网安备 43010402000934号</a></span><span class=icp-splitter>&nbsp;|&nbsp;</span><br class=icp-br>
<span class=icp>湘ICP备2021002319号-1</span></div>
</div><script>'serviceWorker'in navigator&&(navigator.serviceWorker.register('/sw.min.js',{scope:'/'}).then(function(a){}),navigator.serviceWorker.ready.then(function(a){}))</script></footer></div>
<div id=fixed-buttons><a href=#back-to-top id=back-to-top-button class=fixed-button title=回到顶部>
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论>
<i class="fas fa-comment fa-fw"></i>
</a>
</div><div class=assets><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/fuse/fuse.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/topbar/topbar.min.js></script><script type=text/javascript src=/lib/pjax/pjax.min.js></script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-131319987-1',{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-131319987-1" async></script></div>
<div class=pjax-assets><script type=text/javascript src=/lib/twemoji/twemoji.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/auto-render.min.js></script><script type=text/javascript src=/lib/katex/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/mhchem.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:18},comment:{},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:50,threshold:.3,useExtendedSearch:!1},sharerjs:!0,twemoji:!0}</script><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css></div>
</body>
</html>