<!doctype html><html lang=zh><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131319987-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-131319987-1')</script><meta name=author content="kentxxq"><meta name=keywords content="python 项目打包"><meta name=description content="在自己的机器还有服务器上面，都应该搭建好pyenv。网络上的教程太多了，但是说的又很乱。所以自己稍微整理一下。这次的目的是写一个及其简单的过程，所以如果有具体问题，请看官方文档"><meta property="og:title" content="python的文件项目打包"><meta property="og:description" content="在自己的机器还有服务器上面，都应该搭建好pyenv。网络上的教程太多了，但是说的又很乱。所以自己稍微整理一下。这次的目的是写一个及其简单的过程，所以如果有具体问题，请看官方文档"><meta property="og:type" content="article"><meta property="og:url" content="https://kentxxq.com/contents/python%E7%9A%84%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-10-19T00:00:00+08:00"><meta property="article:modified_time" content="2021-02-26T00:06:04+08:00"><link rel=prev href=https://kentxxq.com/contents/python%E7%9A%84pip%E5%87%BA%E7%8E%B0%E6%95%85%E9%9A%9C/><link rel=next href=https://kentxxq.com/contents/vue_node%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97/><link rel=canonical href=https://kentxxq.com/contents/python%E7%9A%84%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><link rel=icon type=image/png href=/favicon.png><title>python的文件项目打包 | kentxxq Blog</title><meta name=title content="python的文件项目打包 | kentxxq Blog"><link rel=stylesheet href=/font/iconfont.css><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","image":"https:\/\/kentxxq.com\/images/me/avatar.jpg","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/kentxxq.com\/"},"articleSection":"posts","name":"python的文件项目打包","headline":"python的文件项目打包","description":"在自己的机器还有服务器上面，都应该搭建好pyenv。网络上的教程太多了，但是说的又很乱。所以自己稍微整理一下。这次的目的是写一个及其简单的过程，所以如果有具体问题，请看官方文档","inLanguage":"zh","author":"kentxxq","creator":"kentxxq","publisher":{"@type":"Organization","name":"kentxxq","logo":{"@type":"ImageObject","url":"https:\/\/kentxxq.com\/images/me/avatar.jpg"}},"accountablePerson":"kentxxq","copyrightHolder":"kentxxq","copyrightYear":"2017","datePublished":"2017-10-19 00:00:00","dateModified":"2021-02-26 00:06:04","url":"https:\/\/kentxxq.com\/contents\/python%E7%9A%84%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85\/","keywords":["python","项目打包"]}</script></head><body><div class=wrapper><nav class=navbar><div class=container><div class="navbar-header header-logo"><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class="menu navbar-right"><a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><div class=container><div class=navbar-header><div><a href=javascript:void(0); class=theme-switch><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href=https://kentxxq.com/>kentxxq Blog</a></div><div class=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=mobile-menu><a class=menu-item href=/posts/ title>Blog</a>
<a class=menu-item href=/categories/ title>Categories</a>
<a class=menu-item href=/tags/ title>Tags</a>
<a class=menu-item href=/about/ title>About</a></div></div></nav><main class=main><div class=container><article class=post-warp><header class=post-header><h1 class=post-title>python的文件项目打包</h1><div class=post-meta>Written by <a href=https://kentxxq.com/ rel=author>kentxxq</a>
with ♥
<span class=post-time>on <time datetime=2017-10-19>October 19, 2017</time></span>
in
<i class="iconfont icon-folder"></i>
<span class=post-category><a href=https://kentxxq.com/categories/%E7%AC%94%E8%AE%B0/>笔记</a></span>
|
<a href=#gitalk-container><span class=gitalk-comment-count itemprop=commentCount></span></a></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title></h2><div class="post-toc-content always-active"><nav id=TableOfContents><ul><li><ul><li><a href=#先看目录结构>先看目录结构</a></li><li><a href=#运行打包>运行打包</a></li><li><a href=#开始安装>开始安装</a></li><li><a href=#安装完成后查看安装结果>安装完成后，查看安装结果</a></li></ul></li></ul></nav></div></div><script type=text/javascript>window.onload=function(){var a=$('.post-toc'),b=$('.post-comment'),f=a.offset().top,d=a.height(),g=a[0].offsetTop,e,c;$(window).scroll(function(){var h=Math.max(document.body.scrollTop,document.documentElement.scrollTop);b.length>0&&(c=b.offset().top,e=c-h-d),f<h?(a.css({position:'fixed'}),b.length>0&&c<h+d?a.css({top:e}):a.css({top:0})):(a.css({position:'absolute'}),a.css({top:g}))})}</script><div class=post-content><blockquote><p>在自己的机器还有服务器上面，都应该搭建好<code>pyenv</code>
网络上的教程太多了，但是说的又很乱。所以自己稍微整理一下。
这次的目的是<strong>写一个及其简单的过程</strong>，所以如果有具体问题，请看官方文档。</p></blockquote><h3 id=先看目录结构>先看目录结构</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#960050;background-color:#1e0010>$</span> tree
<span style=color:#f92672>.</span>
<span style=color:#960050;background-color:#1e0010>├──</span> MANIFEST<span style=color:#f92672>.</span><span style=color:#f92672>in</span>
<span style=color:#960050;background-color:#1e0010>├──</span> README<span style=color:#f92672>.</span>md
<span style=color:#960050;background-color:#1e0010>├──</span> myapp
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> <span style=color:#ae81ff>1.</span>txt
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __init__<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __pycache__
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __init__<span style=color:#f92672>.</span>cpython<span style=color:#f92672>-</span><span style=color:#ae81ff>36.</span>pyc
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> test<span style=color:#f92672>.</span>cpython<span style=color:#f92672>-</span><span style=color:#ae81ff>36.</span>pyc
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> test<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> txt
<span style=color:#960050;background-color:#1e0010>│</span>       <span style=color:#960050;background-color:#1e0010>└──</span> <span style=color:#ae81ff>1.</span>txt
<span style=color:#960050;background-color:#1e0010>├──</span> myapp2
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> test222<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>└──</span> setup<span style=color:#f92672>.</span>py

<span style=color:#ae81ff>4</span> directories, <span style=color:#ae81ff>10</span> files
</code></pre></div><ol><li><code>MANIFEST.in</code>用来记录除了py文件外，需要打包的文件</li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 包含文件</span>
include README.md
<span style=color:#75715e># 递归-包含</span>
recursive-include myapp/txt *
</code></pre></div><ol start=2><li><p><code>README.md</code>一个用来简单介绍的文档</p></li><li><p><code>myapp</code>和<code>myapp2</code>都是存放代码</p></li><li><p><code>setup.py</code>是用来安装和打包的主要文件</p></li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#75715e># -*- coding: utf-8 -*-</span>

<span style=color:#f92672>from</span> setuptools <span style=color:#f92672>import</span> setup, find_packages

setup(
    name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;kentxxq&#39;</span>,               <span style=color:#75715e># 项目名</span>
    version<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;1.0.2&#39;</span>,              <span style=color:#75715e># 版本号</span>
    zip_safe<span style=color:#f92672>=</span>False,               <span style=color:#75715e># 因为部分工具不支持zip，推荐禁用</span>
    packages<span style=color:#f92672>=</span>find_packages(),     <span style=color:#75715e># 当前目录下所有的包</span>
    include_package_data<span style=color:#f92672>=</span>True,    <span style=color:#75715e># 启用清单文件MANIFEST.in</span>
    install_requires<span style=color:#f92672>=</span>[    <span style=color:#75715e># 依赖列表</span>
        <span style=color:#e6db74>&#34;Scrapy&gt;=1.4.0&#34;</span>,
    ]

    <span style=color:#75715e># 上传到PyPI所需要的信息</span>
    author<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;kentxxq&#34;</span>,
    author_email<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;805429509@qq.com&#34;</span>,
    description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;This is an Example Package&#34;</span>,
    license<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;PSF&#34;</span>,
    keywords<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hello world example examples&#34;</span>,
    url<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://a805429509.github.io/&#34;</span>,
)
</code></pre></div><h3 id=运行打包>运行打包</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>python setup.py sdist
</code></pre></div><p>运行打包后的目录</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#960050;background-color:#1e0010>$</span> tree
<span style=color:#f92672>.</span>
<span style=color:#960050;background-color:#1e0010>├──</span> MANIFEST<span style=color:#f92672>.</span><span style=color:#f92672>in</span>
<span style=color:#960050;background-color:#1e0010>├──</span> README<span style=color:#f92672>.</span>md
<span style=color:#960050;background-color:#1e0010>├──</span> dist
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> kentxxq<span style=color:#f92672>-</span><span style=color:#ae81ff>1.0</span><span style=color:#f92672>.</span><span style=color:#ae81ff>2.</span>tar<span style=color:#f92672>.</span>gz
<span style=color:#960050;background-color:#1e0010>├──</span> kentxxq<span style=color:#f92672>.</span>egg<span style=color:#f92672>-</span>info
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> PKG<span style=color:#f92672>-</span>INFO
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> SOURCES<span style=color:#f92672>.</span>txt
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> dependency_links<span style=color:#f92672>.</span>txt
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> <span style=color:#f92672>not</span><span style=color:#f92672>-</span>zip<span style=color:#f92672>-</span>safe
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> requires<span style=color:#f92672>.</span>txt
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> top_level<span style=color:#f92672>.</span>txt
<span style=color:#960050;background-color:#1e0010>├──</span> myapp
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> <span style=color:#ae81ff>1.</span>txt
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __init__<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __pycache__
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> __init__<span style=color:#f92672>.</span>cpython<span style=color:#f92672>-</span><span style=color:#ae81ff>36.</span>pyc
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> test<span style=color:#f92672>.</span>cpython<span style=color:#f92672>-</span><span style=color:#ae81ff>36.</span>pyc
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>├──</span> test<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> txt
<span style=color:#960050;background-color:#1e0010>│</span>       <span style=color:#960050;background-color:#1e0010>└──</span> <span style=color:#ae81ff>1.</span>txt
<span style=color:#960050;background-color:#1e0010>├──</span> myapp2
<span style=color:#960050;background-color:#1e0010>│</span>   <span style=color:#960050;background-color:#1e0010>└──</span> test222<span style=color:#f92672>.</span>py
<span style=color:#960050;background-color:#1e0010>└──</span> setup<span style=color:#f92672>.</span>py

<span style=color:#ae81ff>6</span> directories, <span style=color:#ae81ff>17</span> files
</code></pre></div><h3 id=开始安装>开始安装</h3><p>在上面的文件中，只需要关注<code>dist/kentxxq-1.0.2.tar.gz</code>
直接拷贝到目标机器，进行解压。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>python setup.py install
</code></pre></div><h3 id=安装完成后查看安装结果>安装完成后，查看安装结果</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ tree kentxxq-1.0.2-py3.6.egg
kentxxq-1.0.2-py3.6.egg
├── EGG-INFO
│   ├── dependency_links.txt
│   ├── not-zip-safe
│   ├── PKG-INFO
│   ├── requires.txt
│   ├── SOURCES.txt
│   └── top_level.txt
└── myapp
    ├── __init__.py
    ├── __pycache__
    │   ├── __init__.cpython-36.pyc
    │   └── test.cpython-36.pyc
    ├── test.py
    └── txt
        └── 1.txt

<span style=color:#ae81ff>4</span> directories, <span style=color:#ae81ff>11</span> files
</code></pre></div><ol><li>没有<code>__init__.py</code>的myapp2是没有打包的。</li><li>myapp中1.txt没有进入包内，而MANIFEST.in中的记录的<code>recursive-include myapp/txt *</code>在包内。</li></ol></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>kentxxq</span></p><p class=copyright-item><span>Link:</span>
<a href=https://kentxxq.com/contents/python%E7%9A%84%E6%96%87%E4%BB%B6%E9%A1%B9%E7%9B%AE%E6%89%93%E5%8C%85/><script>document.write(decodeURI(location.origin+location.pathname))</script></a></p><p class="copyright-item lincese">本文采用<a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p></div><div class=post-tags><section><i class="iconfont icon-tag"></i>Tag(s):
<span class=tag><a href=https://kentxxq.com/tags/python/>#python</a></span></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://kentxxq.com/>home</a></span></section></div><div class=post-nav><a href=https://kentxxq.com/contents/python%E7%9A%84pip%E5%87%BA%E7%8E%B0%E6%95%85%E9%9A%9C/ class=prev rel=prev title=python的pip出现故障><i class="iconfont icon-left"></i>&nbsp;python的pip出现故障</a>
<a href=https://kentxxq.com/contents/vue_node%E5%AD%A6%E4%B9%A0%E7%B3%BB%E5%88%97/ class=next rel=next title=vue_node学习系列>vue_node学习系列&nbsp;<i class="iconfont icon-right"></i></a></div></article></div></main><footer class=footer><div style="text-align:center;width:600px;margin:0 auto;padding:20px 0"><a href=https://beian.miit.gov.cn/ target=_blank style=display:inline-block;text-decoration:none;height:20px;line-height:20px rel="external nofollow"><p style="float:left;height:20px;line-height:20px;margin:0 0 0 5px">湘ICP备2021002319号-1</p></a><a>&nbsp;&nbsp;&nbsp;&nbsp;</a>
<a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=43010402000934" style=display:inline-block;text-decoration:none;height:20px;line-height:20px><img src=/images/备案图标.png style=float:left><p style="float:left;height:20px;line-height:20px;margin:0 0 0 5px;color:#939393">湘公网安备
43010402000934号</p></a></div></footer><script src=/js/vendor_no_gallery.min.js async></script><script src=https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js></script></div></body></html>